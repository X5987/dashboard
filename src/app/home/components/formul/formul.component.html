<lib-grid [grid]="tilesForms" [tileTypes]="TileTypeEnum.tileForms"></lib-grid>

<!-- form zone -->
<ng-template #formTemplate let-tile="tile">
  <form id="form" [formGroup]="formGroupSource">

    <div class="form-row">
      <lib-input-text [type]="'text'" matInput
                      [label]="'PrÃ©nom'"
                      [formControl]="formGroupSource.controls['name']"
                      [appearance]="'outline'"
                      [placeholder]="'Ex. Julie'"/>
      <lib-input-text [type]="'email'" matInput
                      [formControl]="formGroupSource.controls['email']"
                      [label]="'Email'"
                      [appearance]="'outline'"
                      [placeholder]="'Ex. allowed@example.com'"/>
    </div>

    <div class="form-row">
      <lib-input-text [type]="'number'" matInput
                      [label]="'Age'"
                      [formControl]="formGroupSource.controls['age']"
                      [appearance]="'outline'"
                      [placeholder]="'Ex. Julie'"/>

      <lib-single-select matInput
                         [list$]="listCountry$"
                         [label]="'Pays'"
                         [formControl]="formGroupSource.controls['country']"
                         [appearance]="'outline'"
                         [placeholder]="'select'"/>
    </div>

    <div class="button-form">
      <button [disabled]="formGroupSource.invalid" mat-raised-button (click)="sentFirstForm()">Envoyer</button>
    </div>
  </form>
</ng-template>
<ng-template #formSecondTemplate let-tile="tile">
  <form id="form-second" [formGroup]="formSecondGroupSource">

    <div class="form-row">
      <lib-autocomplete
        #autocompleteMarque
        [label]="'Marque'"
        [formControl]="formSecondGroupSource.controls['marques']"
        [name]="'auto'"
        [list]="list"
        [appearance]="'outline'"
        [placeholder]="'select'"/>
    </div>

    <div class="button-form">
      <button [disabled]="formSecondGroupSource.invalid" mat-raised-button (click)="sentSecondForm()">Envoyer</button>
    </div>
  </form>
</ng-template>
<ng-template #formThirdTemplate let-tile="tile">
  <div id="form-third">
    <app-todo #appTodo
              [placeholder]="todoPlaceholder"
              [label]="todoLabel"
              [buttonName]="todoButtonName"
              [arrayListTodo]="arrayListTodo">
    </app-todo>
  </div>
</ng-template>

<!-- retsult zone -->
<ng-template #formFirstResultTemplate let-data="data">
  <div><p><strong>Name:</strong> {{ data.name }}</p>
    <p><strong>Age:</strong> {{ data.age }}</p>
    <p><strong>Email:</strong> {{ data.email }}</p>
    <p><strong>country:</strong> {{ data.country.libelle }}</p></div>
</ng-template>
<ng-template #formSecondResultTemplate let-data="data">
  <mat-chip-set aria-label="Dog selection">
    @for (marque of data.marques; track marque) {
      <mat-chip>
        <img
          matChipAvatar
          src="https://material.angular.io/assets/img/examples/shiba1.jpg"
          alt="Photo of a Shiba Inu"
        />
        {{ marque.libelle }}
      </mat-chip>
    }</mat-chip-set>
</ng-template>
<ng-template #formThirdResultTemplate let-data="data">
  <div class="list ">
    <table matSort (matSortChange)="sortData($event)">
      <tr>
        <th mat-sort-header="complete"></th>
        <th mat-sort-header="id">Id</th>
        <th mat-sort-header="message">Message</th>
        <th mat-sort-header="delete">Delete</th>
      </tr>

      @for (todo of arrayListTodo | async; track todo; let i = $index) {
        <tr>

          <td>
            <div class="checkbox-todo ">
              <mat-checkbox [disabled]="(loading | async)"
                            [checked]="todo.complete"
                            (change)="changeTodo(todo)">
              </mat-checkbox>
            </div>
          </td>
          <td>{{ todo.id }}</td>
          <td (click)="changeTodoText(todo)">
            <div class="message-todo">{{ todo.message }}</div>
          </td>
          <td>
            <div class="remove-todo">
              <button mat-icon-button (click)="removeTodo(i)" [disabled]="(loading | async)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </td>

        </tr>
      }
    </table>
  </div>
</ng-template>
